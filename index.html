<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>HERO Sports</title>
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@700&family=Roboto&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<script type="module">
  // Check if mobile and redirect
  if (window.innerWidth <= 768) {
    window.location.href = 'index2.html';
  }
</script>
<style>
  :root {
    --primary-color: #000;
    --secondary-color: #FDFDFD;
    --accent-color: #E53935;
    --text-color: #333;
    --light-gray: #f5f5f5;
    --border-color: #ddd;
  }
  
  * {
    box-sizing: border-box;
  }
  
  body {
    margin:0;
    font-family: 'Roboto', sans-serif;
    background-color: var(--secondary-color);
    color: var(--text-color);
    display: flex;
    flex-direction: column;
    min-height: 100vh;
  }
  
  header {
    display:flex;
    align-items:center;
    padding:10px 20px;
    font-family: 'Oswald', sans-serif;
    font-weight:700;
    background-color: #fff;
    border-bottom: 1px solid var(--border-color);
  }
  
  header img {
    height:50px;
    margin-right:10px;
  }
  
  .welcome-box {
    text-align:center;
    padding:30px 20px;
    font-size:1.3rem;
    background: var(--light-gray);
  }
  
  .social-icons {
    display:flex;
    justify-content:center;
    gap:15px;
    margin-top:20px;
  }
  
  .social-icons a {
    display:inline-flex;
    align-items: center;
    justify-content: center;
    width: 40px;
    height: 40px;
    color:var(--primary-color);
    text-decoration:none;
    font-size:1.5rem;
    transition: all 0.3s ease;
  }
  
  .social-icons a:hover {
    color: var(--accent-color);
    transform: translateY(-3px);
  }
  
  /* Navigation improvements */
  .nav-container {
    position: relative;
    margin: 15px 0;
  }
  
  .nav-separator {
    height: 1px;
    background-color: var(--border-color);
    margin: 0 5%;
  }
  
  nav {
    display: flex;
    justify-content: center;
    flex-wrap: wrap;
    gap: 5px;
    background: #fff;
    padding: 10px 0;
  }
  
  nav a {
    text-decoration: none;
    color: var(--primary-color);
    padding: 10px 15px;
    display: inline-block;
    position: relative;
    transition: all 0.3s ease;
    font-weight: 500;
    border: 1px solid var(--border-color);
    font-size: 0.9rem;
  }
  
  nav a:hover {
    background: var(--light-gray);
  }
  
  nav a.active {
    color: var(--primary-color);
    font-weight: bold;
    background: var(--light-gray);
  }
  
  nav a.active::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    width: 100%;
    height: 2px;
    background-color: var(--primary-color);
  }
  
  /* Content area */
  .content {
    flex: 1;
    padding: 15px;
    max-width: 1200px;
    margin: 0 auto;
    width: 100%;
  }
  
  /* News section layout */
  .news-grid {
    display: flex;
    flex-direction: column;
    gap: 20px;
    margin-bottom: 30px;
  }
  
  @media (min-width: 768px) {
    .news-grid {
      flex-direction: row;
    }
    
    .news-left, .news-right {
      flex: 1;
    }
    
    .news-center {
      flex: 2;
      margin: 0 15px;
    }
  }
  
  .news-left, .news-right, .news-center {
    display: flex;
    flex-direction: column;
    gap: 15px;
  }
  
  /* Article card */
  .article-card {
    background: #fff;
    overflow: hidden;
    border: 1px solid var(--border-color);
    transition: transform 0.3s ease;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  
  .article-card:hover {
    transform: translateY(-3px);
  }
  
  .article-image {
    width: 100%;
    height: 160px;
    object-fit: cover;
  }
  
  .article-content {
    padding: 12px;
    flex-grow: 1;
    display: flex;
    flex-direction: column;
  }
  
  .article-title {
    font-family: 'Oswald', sans-serif;
    font-size: 1rem;
    margin: 0 0 8px;
    text-align: left;
    line-height: 1.3;
  }
  
  .article-desc {
    color: #555;
    line-height: 1.4;
    font-size: 0.85rem;
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
    flex-grow: 1;
  }
  
  /* Video card */
  .video-card {
    background: #fff;
    overflow: hidden;
    border: 1px solid var(--border-color);
    transition: transform 0.3s ease;
    cursor: pointer;
    display: flex;
    flex-direction: column;
    height: 100%;
  }
  
  .video-card:hover {
    transform: translateY(-3px);
  }
  
  .video-thumbnail {
    position: relative;
    width: 100%;
    padding-top: 56.25%; /* 16:9 aspect ratio */
    background-color: #000;
  }
  
  .video-thumbnail iframe,
  .video-thumbnail img {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    border: none;
  }
  
  .video-play-icon {
    position: absolute;
    top: 50%;
    left: 50%;
    transform: translate(-50%, -50%);
    color: #fff;
    font-size: 2.5rem;
    opacity: 0.8;
    transition: opacity 0.3s ease;
  }
  
  .video-card:hover .video-play-icon {
    opacity: 1;
  }
  
  .video-content {
    padding: 12px;
  }
  
  .video-title {
    font-family: 'Oswald', sans-serif;
    font-size: 1rem;
    text-align: left;
    margin: 0;
    line-height: 1.3;
  }
  
  .video-title blockquote {
    margin: 0;
    padding: 0;
    font-style: italic;
  }
  
  /* Likes styling */
  .article-likes, .video-likes {
    padding: 8px 12px;
    border-top: 1px solid var(--border-color);
    display: flex;
    align-items: center;
  }
  
  .like-btn {
    background: none;
    border: none;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 5px;
    font-size: 0.85rem;
    color: #666;
    padding: 0;
  }
  
  .like-btn:hover {
    color: var(--accent-color);
  }
  
  .like-btn .fas.fa-heart {
    color: var(--accent-color);
  }
  
  .like-btn:disabled {
    cursor: default;
  }
  
  /* Videos section layout */
  .videos-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }
  
  /* Articles section layout */
  .articles-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
  }
  
  /* Video popup */
  .video-popup {
    display: none;
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: rgba(0,0,0,0.9);
    z-index: 1000;
    justify-content: center;
    align-items: center;
  }
  
  .video-popup-content {
    position: relative;
    width: 90%;
    max-width: 800px;
    background: #000;
  }
  
  .video-popup-close {
    position: absolute;
    top: -40px;
    right: 0;
    color: #fff;
    font-size: 1.8rem;
    cursor: pointer;
    z-index: 1001;
  }
  
  .video-popup-iframe {
    width: 100%;
    aspect-ratio: 16/9;
  }
  
  .video-popup-iframe iframe {
    width: 100%;
    height: 100%;
    border: none;
  }
  
  /* Section titles */
  .section-title {
    font-family: 'Oswald', sans-serif;
    font-size: 1.5rem;
    margin: 25px 0 15px;
    padding-bottom: 8px;
    border-bottom: 2px solid var(--primary-color);
  }
  
  /* Footer */
  footer {
    background-color: var(--primary-color);
    color: #fff;
    padding: 25px 15px;
    margin-top: auto;
  }
  
  .footer-content {
    display: flex;
    flex-wrap: wrap;
    justify-content: space-between;
    max-width: 1200px;
    margin: 0 auto;
  }
  
  .footer-section {
    flex: 1;
    min-width: 200px;
    margin-bottom: 20px;
  }
  
  .footer-section h3 {
    font-family: 'Oswald', sans-serif;
    margin-bottom: 12px;
    font-size: 1.1rem;
    border-bottom: 1px solid #444;
    padding-bottom: 5px;
  }
  
  .footer-links a {
    display: block;
    color: #ddd;
    text-decoration: none;
    margin-bottom: 8px;
    transition: color 0.3s;
    font-size: 0.9rem;
  }
  
  .footer-links a:hover {
    color: #fff;
  }
  
  .footer-social a {
    display: inline-block;
    color: #fff;
    background-color: #333;
    width: 34px;
    height: 34px;
    border-radius: 50%;
    text-align: center;
    line-height: 34px;
    margin-right: 8px;
    transition: background-color 0.3s;
    font-size: 0.9rem;
  }
  
  .footer-social a:hover {
    background-color: #555;
  }
  
  .admin-link {
    display: inline-block;
    margin-top: 12px;
    padding: 6px 12px;
    background-color: #333;
    color: #fff;
    text-decoration: none;
    transition: background-color 0.3s;
    font-size: 0.9rem;
  }
  
  .admin-link:hover {
    background-color: #555;
  }
  
  .copyright {
    text-align: center;
    margin-top: 20px;
    padding-top: 20px;
    border-top: 1px solid #444;
    color: #999;
    font-size: 0.85rem;
  }
  
  .author-link {
    color: #fff;
    text-decoration: underline;
    margin-left: 5px;
  }
  
  /* Responsive adjustments */
  @media (max-width: 1024px) {
    .news-grid {
      flex-direction: column;
    }
    
    .news-center {
      margin: 0;
    }
  }
  
  @media (max-width: 768px) {
    nav {
      flex-direction: row;
      overflow-x: auto;
      justify-content: flex-start;
      padding: 10px 5px;
      -webkit-overflow-scrolling: touch;
    }
    
    nav a {
      flex: 0 0 auto;
      width: auto;
      text-align: center;
      font-size: 0.85rem;
      padding: 8px 12px;
    }
    
    .welcome-box {
      font-size: 1.1rem;
      padding: 20px 15px;
    }
    
    .videos-grid, .articles-grid {
      grid-template-columns: 1fr;
    }
    
    .footer-section {
      min-width: 100%;
    }
    
    .section-title {
      font-size: 1.3rem;
    }
  }
  
  @media (max-width: 480px) {
    header {
      padding: 8px 15px;
    }
    
    header img {
      height: 40px;
    }
    
    .content {
      padding: 10px;
    }
    
    .article-image {
      height: 140px;
    }
  }
</style>
</head>
<body>

<header>
  <img src="https://i.ibb.co/65R703b/SPORTS-removebg-preview.png" alt="Logo">
  HERO Sports
</header>

<div class="welcome-box">
  WELCOME TO YOUR NEXT GENERATION OF SPORTS NEWS
  <div class="social-icons">
    <a href="https://www.youtube.com/channel/UCvRf1s74zBL1Nptge-mZAug" target="_blank"><i class="fab fa-youtube"></i></a>
    <a href="https://www.youtube.com/@btemOfficial" target="_blank"><i class="fab fa-youtube"></i></a>
    <a href="https://www.instagram.com/he_r_o24/" target="_blank"><i class="fab fa-instagram"></i></a>
    <a href="https://www.tiktok.com/@hero_sports_allnews" target="_blank"><i class="fab fa-tiktok"></i></a>
  </div>
</div>

<div class="nav-container">
  <div class="nav-separator"></div>
  <nav>
    <a href="#news" class="active" data-tab="news">News</a>
    <a href="#videos" data-tab="videos">Videos</a>
    <a href="#articles" data-tab="articles">Articles</a>
    <a href="search.html">Search</a>
  </nav>
</div>

<div class="content">
  <!-- News Section -->
  <div id="news-section">
    <h2 class="section-title">Latest News</h2>
    <div class="news-grid">
      <div class="news-left" id="news-left-column">
        <!-- Articles will be loaded here -->
      </div>
      <div class="news-center" id="news-center-column">
        <!-- Videos will be loaded here -->
      </div>
      <div class="news-right" id="news-right-column">
        <!-- Articles will be loaded here -->
      </div>
    </div>
  </div>
  
  <!-- Videos Section (initially hidden) -->
  <div id="videos-section" style="display: none;">
    <h2 class="section-title">Videos</h2>
    <div class="videos-grid" id="videos-container">
      <!-- Videos will be loaded here -->
    </div>
  </div>
  
  <!-- Articles Section (initially hidden) -->
  <div id="articles-section" style="display: none;">
    <h2 class="section-title">Articles</h2>
    <div class="articles-grid" id="articles-container">
      <!-- Articles will be loaded here -->
    </div>
  </div>
</div>

<!-- Video Popup -->
<div class="video-popup" id="video-popup">
  <div class="video-popup-content">
    <span class="video-popup-close" id="video-popup-close"><i class="fas fa-times"></i></span>
    <div class="video-popup-iframe" id="video-popup-iframe"></div>
  </div>
</div>

<footer>
  <div class="footer-content">
    <div class="footer-section">
      <h3>Navigation</h3>
      <div class="footer-links">
        <a href="#news" data-tab="news">News</a>
        <a href="#videos" data-tab="videos">Videos</a>
        <a href="#articles" data-tab="articles">Articles</a>
        <a href="search.html">Search</a>
      </div>
    </div>
    
    <div class="footer-section">
      <h3>Follow Us</h3>
      <div class="footer-social">
        <a href="https://www.youtube.com/channel/UCvRf1s74zBL1Nptge-mZAug" target="_blank"><i class="fab fa-youtube"></i></a>
        <a href="https://www.youtube.com/@btemOfficial" target="_blank"><i class="fab fa-youtube"></i></a>
        <a href="https://www.instagram.com/he_r_o24/" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="https://www.tiktok.com/@hero_sports_allnews" target="_blank"><i class="fab fa-tiktok"></i></a>
      </div>
    </div>
    
    <div class="footer-section">
      <h3>Admin</h3>
      <p>Site administration</p>
      <a href="pass.html" class="admin-link">ADMIN LOGIN</a>
    </div>
  </div>
  
  <div class="copyright">
    &copy; 2023 HERO Sports. All rights reserved.
    <a href="https://mkbertrand.vercel.app/" class="author-link" target="_blank">Made by M. K. Bertrand</a>
  </div>
</footer>

<!-- Firebase Scripts -->
<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-app.js";
  import { getFirestore, collection, getDocs, query, orderBy, doc, updateDoc, increment, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/12.2.1/firebase-firestore.js";
  
  const firebaseConfig = {
    apiKey: "AIzaSyCW2RJIku0JLJZTUu0YA9yKO8zjtX29fAo",
    authDomain: "muah-feed.firebaseapp.com",
    databaseURL: "https://muah-feed-default-rtdb.firebaseio.com",
    projectId: "muah-feed",
    storageBucket: "muah-feed.firebasestorage.app",
    messagingSenderId: "442314397706",
    appId: "1:442314397706:web:65210aa85f2c43053667f3",
    measurementId: "G-RD4CWTL6KG"
  };
  
  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);
  
  // Navigation active state management
  document.addEventListener('DOMContentLoaded', function() {
    const navLinks = document.querySelectorAll('nav a');
    const footerLinks = document.querySelectorAll('.footer-links a');
    const sections = {
      news: document.getElementById('news-section'),
      videos: document.getElementById('videos-section'),
      articles: document.getElementById('articles-section')
    };
    
    // Function to switch tabs
    function switchTab(tabName) {
      // Hide all sections
      Object.values(sections).forEach(section => {
        section.style.display = 'none';
      });
      
      // Show selected section
      sections[tabName].style.display = 'block';
      
      // Update active class on nav links
      navLinks.forEach(link => {
        if (link.getAttribute('data-tab') === tabName) {
          link.classList.add('active');
        } else if (link.hasAttribute('data-tab')) {
          link.classList.remove('active');
        }
      });
      
      // Save active tab to localStorage
      localStorage.setItem('activeTab', tabName);
    }
    
    // Add click event to nav links
    navLinks.forEach(link => {
      if (link.hasAttribute('data-tab')) {
        link.addEventListener('click', function(e) {
          e.preventDefault();
          const tabName = this.getAttribute('data-tab');
          switchTab(tabName);
        });
      }
    });
    
    // Add click event to footer links
    footerLinks.forEach(link => {
      link.addEventListener('click', function(e) {
        e.preventDefault();
        const tabName = this.getAttribute('data-tab');
        switchTab(tabName);
        
        // Scroll to top
        window.scrollTo({ top: 0, behavior: 'smooth' });
      });
    });
    
    // Check if there's a saved active tab
    const savedTab = localStorage.getItem('activeTab');
    if (savedTab && sections[savedTab]) {
      switchTab(savedTab);
    }
    
    // Load data from Firestore
    loadContent();
  });
  
  // Function to extract YouTube ID from URL
  function getYouTubeId(url) {
    const regExp = /^.*(youtu.be\/|v\/|u\/\w\/|embed\/|watch\?v=|\&v=)([^#\&\?]*).*/;
    const match = url.match(regExp);
    return (match && match[2].length === 11) ? match[2] : null;
  }
  
  // Function to load content from Firestore
  async function loadContent() {
    try {
      // Load articles
      const articlesQuery = query(collection(db, 'articles'), orderBy('timestamp', 'desc'));
      const articlesSnapshot = await getDocs(articlesQuery);
      const articles = articlesSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      
      // Load videos
      const videosQuery = query(collection(db, 'videos'), orderBy('timestamp', 'desc'));
      const videosSnapshot = await getDocs(videosQuery);
      const videos = videosSnapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));
      
      // Render content
      renderNews(articles, videos);
      renderVideos(videos);
      renderArticles(articles);
      
      // Set up likes system
      setupLikesSystem();
    } catch (error) {
      console.error('Error loading content:', error);
    }
  }
  
  // Function to render news section (mix of articles and videos)
  function renderNews(articles, videos) {
    const newsLeft = document.getElementById('news-left-column');
    const newsCenter = document.getElementById('news-center-column');
    const newsRight = document.getElementById('news-right-column');
    
    // Clear existing content
    newsLeft.innerHTML = '';
    newsCenter.innerHTML = '';
    newsRight.innerHTML = '';
    
    // Distribute articles to left and right columns
    articles.forEach((article, index) => {
      const articleElement = createArticleElement(article);
      
      if (index % 2 === 0) {
        newsLeft.appendChild(articleElement);
      } else {
        newsRight.appendChild(articleElement);
      }
    });
    
    // Add videos to center column (only first 2 for better layout)
    videos.slice(0, 2).forEach(video => {
      const videoElement = createVideoElement(video);
      newsCenter.appendChild(videoElement);
    });
  }
  
  // Function to render videos section
  function renderVideos(videos) {
    const videosContainer = document.getElementById('videos-container');
    videosContainer.innerHTML = '';
    
    videos.forEach(video => {
      const videoElement = createVideoElement(video);
      videosContainer.appendChild(videoElement);
    });
  }
  
  // Function to render articles section
  function renderArticles(articles) {
    const articlesContainer = document.getElementById('articles-container');
    articlesContainer.innerHTML = '';
    
    articles.forEach(article => {
      const articleElement = createArticleElement(article);
      articlesContainer.appendChild(articleElement);
    });
  }
  
  // Function to create article element
  function createArticleElement(article) {
    const articleDiv = document.createElement('div');
    articleDiv.className = 'article-card';
    articleDiv.setAttribute('data-id', article.id);
    articleDiv.setAttribute('data-type', 'article');
    
    articleDiv.innerHTML = `
      <img src="${article.image}" alt="${article.title}" class="article-image">
      <div class="article-content">
        <h3 class="article-title">${article.title}</h3>
        <div class="article-desc">${article.description}</div>
      </div>
      <div class="article-likes">
        <button class="like-btn" data-id="${article.id}" data-type="article">
          <i class="far fa-heart"></i> <span class="like-count">${article.likes || 0}</span>
        </button>
      </div>
    `;
    
    // Add click event to open article in view.html
    articleDiv.addEventListener('click', (e) => {
      if (!e.target.closest('.like-btn')) {
        window.location.href = `view.html?id=${article.id}`;
      }
    });
    
    return articleDiv;
  }
  
  // Function to create video element
  function createVideoElement(video) {
    const videoDiv = document.createElement('div');
    videoDiv.className = 'video-card';
    videoDiv.setAttribute('data-id', video.id);
    videoDiv.setAttribute('data-type', 'video');
    
    const videoId = getYouTubeId(video.link);
    const thumbnailUrl = `https://img.youtube.com/vi/${videoId}/hqdefault.jpg`;
    
    videoDiv.innerHTML = `
      <div class="video-thumbnail">
        <img src="${thumbnailUrl}" alt="${video.title}">
        <div class="video-play-icon"><i class="fas fa-play-circle"></i></div>
      </div>
      <div class="video-content">
        <h3 class="video-title"><blockquote>${video.title}</blockquote></h3>
      </div>
      <div class="video-likes">
        <button class="like-btn" data-id="${video.id}" data-type="video">
          <i class="far fa-heart"></i> <span class="like-count">${video.likes || 0}</span>
        </button>
      </div>
    `;
    
    // Add click event to open video popup
    videoDiv.addEventListener('click', (e) => {
      if (!e.target.closest('.like-btn')) {
        openVideoPopup(video.link);
      }
    });
    
    return videoDiv;
  }
  
  // Function to open video popup
  function openVideoPopup(videoUrl) {
    const videoPopup = document.getElementById('video-popup');
    const videoPopupIframe = document.getElementById('video-popup-iframe');
    const videoId = getYouTubeId(videoUrl);
    
    videoPopupIframe.innerHTML = `
      <iframe src="https://www.youtube.com/embed/${videoId}?autoplay=1" 
              frameborder="0" 
              allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" 
              allowfullscreen>
      </iframe>
    `;
    
    videoPopup.style.display = 'flex';
    
    // Add event to close popup when clicking close button
    document.getElementById('video-popup-close').addEventListener('click', () => {
      videoPopup.style.display = 'none';
      videoPopupIframe.innerHTML = '';
    });
    
    // Add event to close popup when clicking outside
    videoPopup.addEventListener('click', (e) => {
      if (e.target === videoPopup) {
        videoPopup.style.display = 'none';
        videoPopupIframe.innerHTML = '';
      }
    });
  }
  
  // Function to set up likes system using Firestore
  function setupLikesSystem() {
    document.querySelectorAll('.like-btn').forEach(btn => {
      const contentId = btn.getAttribute('data-id');
      const contentType = btn.getAttribute('data-type');
      
      // Check if user has liked this content
      if (localStorage.getItem(`liked_${contentType}_${contentId}`)) {
        btn.querySelector('i').className = 'fas fa-heart';
        btn.disabled = true;
      }
      
      // Add click event to like button
      btn.addEventListener('click', async (e) => {
        e.stopPropagation(); // Prevent triggering parent click events
        
        if (!localStorage.getItem(`liked_${contentType}_${contentId}`)) {
          try {
            // Update like count in Firestore
            const docRef = doc(db, `${contentType}s`, contentId);
            await updateDoc(docRef, {
              likes: increment(1)
            });
            
            // Get updated like count
            const updatedDoc = await getDoc(docRef);
            const updatedLikes = updatedDoc.data().likes || 0;
            
            // Update button
            btn.querySelector('.like-count').textContent = updatedLikes;
            btn.querySelector('i').className = 'fas fa-heart';
            btn.disabled = true;
            
            // Mark as liked by user
            localStorage.setItem(`liked_${contentType}_${contentId}`, 'true');
          } catch (error) {
            console.error('Error updating like:', error);
          }
        }
      });
    });
  }
</script>

</body>
</html>
